<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>FAST-ER: learn_detector.cc File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>learn_detector.cc File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Main file for the <code>learn_detector</code> executable. 
<p>
<div class="fragment"><pre class="fragment"><a class="code" href="group__gOptimize.html#g570328aac21e4be9c1c73b6d22bbaf93" title="Generate an optimized corner detector.">learn_detector</a> [--var value] ... [--exec config_file] ...
</pre></div> <code>learn_detector</code> reads configuration data from <code>learn_detector.cfg</code> in the current directory and acceps standard GVars3 command line arguments for setting variables and running other configuration files.<p>
The <a class="el" href="structtree.html" title="This class represents a decision tree.">tree</a> is serialized by the function <a class="el" href="classtree__element.html#da6d8d9fb3c070720758234b44c9cc43" title="Serialize the tree.">tree_element::print()</a>. This <a class="el" href="structtree.html" title="This class represents a decision tree.">tree</a> can be extracted from the output with the following command:<p>
<code>awk 'a&amp;&amp;!NF{exit}a;/Final tree/{a=1}' </code><em>filename</em><p>
This file contains a direct implementation of section V of the accompanying paper, in the function <a class="el" href="group__gOptimize.html#g570328aac21e4be9c1c73b6d22bbaf93" title="Generate an optimized corner detector.">learn_detector</a>. For more information, refer to the section on <a class="el" href="group__gOptimize.html">optimization</a>.<h2><a class="anchor" name="ldConf">
Configuration.</a></h2>
The default parameters for <code>learn_detector</code> are in <code>learn_detector.cfg</code>, which are the parameters described in to paper. They are:<p>
<div class="fragment"><pre class="fragment"><span class="comment">//Training data</span>
<span class="comment">//Make this point to the directory containing the repeatability data</span>
repeatability_dataset.directory=/home/edrosten/data/repeatability/box
repeatability_dataset.size=3
repeatability_dataset.format=cam

<span class="comment">//Distince determining whether a point is repeated</span>
fuzz=5

<span class="comment">//Iteration parameters</span>
Temperature.expo.scale=100
Temperature.expo.alpha=30
iterations=100000

<span class="comment">//Threshold to use</span>
FAST_threshold=35

<span class="comment">//Cost function parameters</span>
repeatability_scale=1
num_cost = 3500
max_nodes=10000

<span class="comment">//Random tree parameters</span>
initial_tree_depth=2
<a class="code" href="group__gTree.html#gba2611edc3d025abd67eb4d57c5e9672" title="Actual x,y offset of the offset numbers in the different available orientations.">offsets</a>.min_radius=2.0
offsets.max_radius=4.2


<span class="comment">//Change this one for different sequences</span>
random_seed=84175664

<span class="comment">// Debugging</span>
debug.print_old_tree=0
debug.print_new_tree=0
debug.verify_detections=1
debug.verify_scores=1

gvarlist
echo
echo Log starts
echo ==========
echo
</pre></div><p>
Variables can be overridden using the <code>--varname</code> <code>value</code> commandline syntax. For details on how the data loading and so on operated, refer to <a class="el" href="group__gOptimize.html#g9056ca04bb796b8a626c9630b17dac1b" title="Load configuration and data and learn a detector.">run_learn_detector</a>. 
<p>Definition in file <a class="el" href="learn__detector_8cc-source.html">learn_detector.cc</a>.</p>

<p>
<code>#include &lt;iostream&gt;</code><br>
<code>#include &lt;fstream&gt;</code><br>
<code>#include &lt;climits&gt;</code><br>
<code>#include &lt;float.h&gt;</code><br>
<code>#include &lt;cstring&gt;</code><br>
<code>#include &lt;cerrno&gt;</code><br>
<code>#include &lt;cmath&gt;</code><br>
<code>#include &lt;vector&gt;</code><br>
<code>#include &lt;utility&gt;</code><br>
<code>#include &lt;algorithm&gt;</code><br>
<code>#include &lt;cvd/image_io.h&gt;</code><br>
<code>#include &lt;cvd/random.h&gt;</code><br>
<code>#include &lt;cvd/vector_image_ref.h&gt;</code><br>
<code>#include &lt;tag/tuple.h&gt;</code><br>
<code>#include &lt;tag/stdpp.h&gt;</code><br>
<code>#include &lt;tag/fn.h&gt;</code><br>
<code>#include &lt;tag/printf.h&gt;</code><br>
<code>#include &lt;TooN/TooN.h&gt;</code><br>
<code>#include &quot;gvars_vector.h&quot;</code><br>
<code>#include &quot;faster_tree.h&quot;</code><br>
<code>#include &quot;faster_bytecode.h&quot;</code><br>
<code>#include &quot;offsets.h&quot;</code><br>
<code>#include &quot;utility.h&quot;</code><br>
<code>#include &quot;load_data.h&quot;</code><br>

<p>
<a href="learn__detector_8cc-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gUtility.html#g2444e6069375ebf77ae5cdd904d2dd4e">sq</a> (double d)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">vector&lt; int &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gUtility.html#g970369162ed8b57ba3bdfc8a432e7721">range</a> (int num)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">vector&lt; ImageRef &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gRepeatability.html#g60e1559e8d38d5bc5f9c54e2760a38b7">generate_disc</a> (int radius)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">Image&lt; bool &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gRepeatability.html#g5784016ca224d76826abed12fa051b3f">paint_circles</a> (const vector&lt; ImageRef &gt; &amp;corners, const vector&lt; ImageRef &gt; &amp;circle, ImageRef size)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gRepeatability.html#gfc6a670adb399e588bec2896127337ed">compute_repeatability</a> (const vector&lt; vector&lt; Image&lt; array&lt; float, 2 &gt; &gt; &gt; &gt; &amp;warps, const vector&lt; vector&lt; ImageRef &gt; &gt; &amp;corners, int r, ImageRef size)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classtree__element.html">tree_element</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gOptimize.html#g0da43df09cc13e15cd6480308af22ee0">random_tree</a> (int d, bool is_eq_branch=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gOptimize.html#g7b38440886d4605ab21ca574e15e6bd8">compute_temperature</a> (int i, int imax)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classtree__element.html">tree_element</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gOptimize.html#g570328aac21e4be9c1c73b6d22bbaf93">learn_detector</a> (const vector&lt; Image&lt; byte &gt; &gt; &amp;images, const vector&lt; vector&lt; Image&lt; array&lt; float, 2 &gt; &gt; &gt; &gt; &amp;warps)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gOptimize.html#g9056ca04bb796b8a626c9630b17dac1b">run_learn_detector</a> (int argc, char **argv)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gOptimize.html#g3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>

</table>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Nov 5 10:25:01 2008 for FAST-ER by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
